/*!
 * Selenium Query Library v0.50.34
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 */
"use strict";function each(n,t,e){if(null==n)return e||n;for(var r=n.length,u=-1;++u<r;)t.call(e||n,n[u],u);return e||n}function map(n,t,e){var r=[];return each(n,function(n,e){r.push(t(n,e))}),r}function aggr(n,t,e,r){return each(t,function(u,o){n=e.call(r||t,n,t[o],o)}),n}function indexOf(n,t,e){if(null==n)return-1;for(var r=n.length,u=-1;++u<r;)if(t.call(e||n,n[u],u)===!0)return u;return-1}function scripts_nodeMatchesSelector(){var n=arguments[0],t=arguments[1],e=document.documentElement,r=e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector;return null==n||1!==n.nodeType?!1:r.call(n,t)}function scripts_nodeParent(){var n=arguments[0];return n.parentNode}function scripts_nodeClosest(){function n(){var n=arguments[0],t=arguments[1],e=document.documentElement,r=e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector;return null==n||1!==n.nodeType?!1:r.call(n,t)}for(var t=arguments[0],e=arguments[1];null!=t&&null!=t.parentNode;)if(t=t.parentNode,n(t,e))return t;return null}function scripts_nodeChildren(){function n(){var n=arguments[0],t=arguments[1],e=document.documentElement,r=e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector;return null==n||1!==n.nodeType?!1:r.call(n,t)}for(var t=arguments[0],e=arguments[1],r=[],u=t.firstChild;null!=u;)(null==e||n(u,e))&&r.push(u),u=u.nextSibling;return r}function scripts_nodeNext(){function n(){var n=arguments[0],t=arguments[1],e=document.documentElement,r=e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector;return null==n||1!==n.nodeType?!1:r.call(n,t)}var t=arguments[0],e=arguments[1],r=t.nextElementSibling;if(null==e)return r;for(;null!=r;){if(n(r,e))return r;r=r.nextElementSibling}return null}function scripts_nodeRemove(){var n=arguments[0];null!=n.parentNode&&n.parentNode.removeChild(n)}function scripts_nodeAttribute(){function n(n,t){return n.getAttribute(t)}function t(n,t,e){return n.setAttribute(t,e)}var e=arguments.length;if(!(2>e)){var r=arguments[0],u=arguments[1];if(null!=r&&null!=u){if(2==e&&"string"==typeof u)return n(r,u);if("object"!=typeof u){if(e>2&&"string"==typeof u){var o=arguments[2];return void t(r,u,o)}}else for(var i in u)t(r,i,u[i])}}}function scripts_nodeDatasetRemove(){var n=arguments[0],t=arguments[1];null!=n&&null!=t&&n.removeAttribute(t)}function scripts_nodeProperty(){function n(n,t){return n[t]}function t(n,t,e){n[t]=e}var e=arguments.length;if(!(2>e)){var r=arguments[0],u=arguments[1];if(null!=r&&null!=u){if(2==e&&"string"==typeof u)return n(r,u);if("object"!=typeof u){if(e>2&&"string"==typeof u){var o=arguments[2];return void t(r,u,o)}}else for(var i in u)t(r,i,u[i])}}}function scripts_nodeFunctionCall(){var n=arguments[0],t=arguments[1],e=Array.prototype.slice.call(arguments,2);return n[t].apply(n,e)}function scripts_nodeDataset(){function n(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.dataset?void delete n.dataset[t]:void n.removeAttribute(t)}function t(n){return n.replace(/\-(.)/g,function(n,t){return t.toUpperCase()})}function e(n){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function r(n,r){return r=t(r),n.dataset?n.dataset[r]:n.getAttribute("data-"+e(r))}function u(t,r,u){return null==u?void n(t,r):t.dataset?void(t.dataset[r]=u):void t.setAttribute(t,"data-"+e(r),u)}var o=arguments.length;if(!(2>o)){var i=arguments[0],a=arguments[1];if(null!=i&&null!=a){if(2==o&&"string"==typeof a)return r(i,a);if("object"!=typeof a){if(o>2&&"string"==typeof a){var s=arguments[2];return void u(i,a,s)}}else for(var c in a)u(i,c,a[c])}}}function scripts_nodeDatasetRemove(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.dataset?void delete n.dataset[t]:void n.removeAttribute(t)}function scripts_nodeSelectTextRange(){function n(n,e){if(t.focus&&t.focus(),void 0!==t.selectionStart)return t.selectionStart=n,void(t.selectionEnd=e);if(void 0!==t.setSelectionRange)return void t.setSelectionRange(n,e);throw Error("Unable to select the range")}var t=arguments[0],e=Array.prototype.slice.call(arguments,1),r=t.value;if(0===e.length)return void n(0,r.length);var u=e[0];if("string"==typeof u){var o=r.indexOf(u);return void(-1!==o&&n(o,o+u.length))}var o=e[0],i=e[1];"number"==typeof o&&"number"==typeof i&&n(o,i)}function scripts_nodeSelectOption(){function n(){function n(n){var t=document.createEvent("Event");return t.initEvent(n,!0,!0),t}function t(n){var t=void 0===arguments[1]?{}:arguments[1],e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!0,!0,t),e}function e(e,r){return null==r||"on"+e in u?n(e):t(e,r)}function r(n,t){n.dispatchEvent(t)}var u=arguments[0],o=arguments[1],i=arguments[2];if(null==i&&"function"==typeof u[o])return void u[o]();var a=e(o,i);r(u,a)}function t(n,t){var e=n.textContent||"";return-1!==e.trim().indexOf(i)}function e(n){return function(t){return(t.getAttribute(n)||"").trim()===i}}function r(n){null==u&&(u=o.querySelectorAll("option"));for(var t,e=u.length,r=0;e>r;r++)if(t=u[r],n(t,r)===!0)return[t,r];return null}var u,o=arguments[0],i=arguments[1],a=r(t);if(null==a&&(a=r(e("value"))),null==a&&(a=r(e("name"))),null==a&&(a=r(e("id"))),null==a)throw Error("Option not found: "+i);var s=a[0],c=a[1];o.selectedIndex=c,n(s,"click"),n(o,"change")}function scripts_nodeClassAdd(){function n(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.classList?n.classList.contains(t):-1!==(" "+n.className+" ").indexOf(" "+t+" ")}var t=arguments[0],e=arguments[1];if(null!=t&&null!=e&&!n(t,e))return t.classList?void t.classList.add(e):void(t.className+=" "+e)}function scripts_nodeClassRemove(){function n(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.classList?n.classList.contains(t):-1!==(" "+n.className+" ").indexOf(" "+t+" ")}var t=arguments[0],e=arguments[1];if(null!=t&&null!=e&&n(t,e)!==!1)return t.classList?void t.classList.remove(e):void(t.className=(" "+t.className+" ").replace(" "+e+" "," "))}function scripts_nodeClassToggle(){function n(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.classList?n.classList.contains(t):-1!==(" "+n.className+" ").indexOf(" "+t+" ")}var t=arguments[0],e=arguments[1];if(null!=t&&null!=e)return t.classList?void t.classList.toggle(e):n(t,e)?void scripts_nodeClassRemove(t,e):void scripts_nodeClassAdd(t,e)}function scripts_nodeClassHas(){var n=arguments[0],t=arguments[1];if(null!=n&&null!=t)return n.classList?n.classList.contains(t):-1!==(" "+n.className+" ").indexOf(" "+t+" ")}function scripts_nodeTrigger(){function n(n){var t=document.createEvent("Event");return t.initEvent(n,!0,!0),t}function t(n){var t=void 0===arguments[1]?{}:arguments[1],e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!0,!0,t),e}function e(e,r){return null==r||"on"+e in u?n(e):t(e,r)}function r(n,t){n.dispatchEvent(t)}var u=arguments[0],o=arguments[1],i=arguments[2];if(null==i&&"function"==typeof u[o])return void u[o]();var a=e(o,i);r(u,a)}function scripts_nodeCss(){function n(n){return n.replace(/\-(.)/g,function(n,t){return t.toUpperCase()})}function t(t,e){return getComputedStyle(t)[n(e)]}function e(t,e,r){console.log(arguments),t.style[n(e)]=r}var r=arguments.length;if(!(2>r)){var u=arguments[0],o=arguments[1];if(null!=u&&null!=o){if(2==r&&"string"==typeof o)return t(u,o);if("object"!=typeof o){if(r>2&&"string"==typeof o){var i=arguments[2];return void e(u,o,i)}}else for(var a in o)e(u,a,o[a])}}}var _=require("atma-utils"),_webdriver=require("selenium-webdriver"),dfr_run;!function(){dfr_run=function(n){return _.class_Dfr.run(n)}}();var node_eval,node_evalGlobal,node_is;!function(){function n(n){return n.executeScript?n:n.getDriver?n.getDriver():n.driver_}function t(n){if("string"==typeof n)return n;var t=n.toString();return t=t.substring(t.indexOf("{")+1),t=t.substring(0,t.lastIndexOf("}")-1),t=t.trim()}node_eval=function(e,r){for(var u=arguments.length,o=Array(u>2?u-2:0),i=2;u>i;i++)o[i-2]=arguments[i];return dfr_run(function(u){var i;if(e instanceof _webdriver.WebDriver)return void u();var a=t(r);n(e);(i=n(e)).executeScript.apply(i,[a,e].concat(o)).then(u,function(n){console.error("Unexpected browser error",n),u()})})},node_evalGlobal=function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;e>u;u++)r[u-1]=arguments[u];return dfr_run(function(e){var u,o=t(n);(u=_webdriver).executeScript.apply(u,[o].concat(r)).then(e,function(n){console.error("Unexpected browser error",n),e()})})}}();var async_traverse,async_each,async_map,async_at,async_getValueOf,async_mutate,async_next,async_aggr,async_waterfall;!function(){function n(n,t){return null==n?void t():n.then(function(){for(var n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];t.apply(void 0,e)},function(n){t()})}function t(t,e){function r(){return--u<1?void e():void 0}if(0===t.length)return void e();var u=t.length;each(t,function(t){return n(t,r)})}async_each=function(n,e){var r=new SQuery;return n.done(function(n){var u=map(n,function(n){return e(r,n)});t(u,function(){return r.resolve(r)})}),r},async_map=function(n,t){return async_next(n,function(n,e){return async_waterfall(e,function(e,r){return dfr_run(function(u){function o(t){n.add(t),u()}var i=t(e,r);return null==i||"function"!=typeof i.then?void o(i):void i.then(o,function(){return o(null)})})})})},async_at=function(t,e,r){var u=new SQuery;return t.done(function(o){return e>=o.length?void u.resolve(u):void n(r(u,t[e]),function(){return u.resolve(u)})}),u},async_next=function(t,e){var r=new SQuery;return t.done(function(t){n(e(r,t),function(){return r.resolve(r)})}),r},async_aggr=function(n,t,e){return dfr_run(function(r,u){t.done(function(t){async_waterfall(t,function(t){return e(n,t).then(function(t){n=t})}).then(function(){return r(n)},function(n){return u(n)})})})},async_traverse=function(t,e){return async_each(t,function(t,r){return n(e(r),function(n){t.add(n)})})},async_getValueOf=function(n,t,e){return dfr_run(function(r){t.done(function(t){return n>=t.length?void r(null):void e(t[n]).then(r,function(n){console.error("Getter error",n),r(null)})})})},async_mutate=function(n,e){var r=new SQuery;return n.done(function(n){var u=map(n,function(n){return r.add(n),e(n)});t(u,function(){return r.resolve(r)})}),r},async_waterfall=function(n,t){return dfr_run(function(e,r){function u(){return++o>=i?void e():void t(n[o],o).then(function(){return u()},function(n){return r(n)})}var o=-1,i=n.length;u()})}}();var SQueryProto={length:0,constructor:function(n){return this instanceof SQuery==!1?new SQuery(n):void(0!==arguments.length&&(this.add(n),this.resolve(this)))}};_.obj_extend(SQueryProto,{add:function(n){return null==n?this:_.is_Array(n)===!0?each(n,this.add,this):(this[this.length++]=n,this)},eq:function(n){return async_next(this,function(t,e){n<e.length&&t.add(e[n])})},slice:function(){var n=void 0===arguments[0]?0:arguments[0],t=void 0===arguments[1]?null:arguments[1];return async_next(this,function(e,r){var u=n;if(t>r.length&&(t=r.length),t>u)for(;t>u;u++)e.add(r[u])})},each:function(n){return async_next(this,function(t,e){return async_waterfall(e,function(e,r){return t.add(e),n(e,r)})})},map:function(n){return async_map(this,n)},toArray:function(){var n=this;return dfr_run(function(t){n.done(function(n){var e=Array.prototype.slice.call(n);t(e)})})}}),function(){_.obj_extend(SQueryProto,{find:function(n){return async_traverse(this,function(t){return t.findElements({css:n})})},filter:function(n){return async_traverse(this,function(t){return dfr_run(function(e){node_eval(t,scripts_nodeMatchesSelector,n).done(function(n){return n?void e(t):void e()})})})},parent:function(){return async_traverse(this,function(n){return node_eval(n,scripts_nodeParent)})},closest:function(n){return async_traverse(this,function(t){return node_eval(t,scripts_nodeClosest,n)})},children:function(n){return async_traverse(this,function(t){return node_eval(t,scripts_nodeChildren,n)})},next:function(n){return async_traverse(this,function(t){return node_eval(t,scripts_nodeNext,n)})}})}(),function(){_.obj_extend(SQueryProto,{attr:function(n){var t=void 0===arguments[1]?null:arguments[1];return 1===arguments.length&&"string"==typeof n?async_getValueOf(0,this,function(t){return t.getAttribute(n)}):async_mutate(this,function(e){return node_eval(e,scripts_nodeAttribute,n,t)})},val:function(n){var t=function(){return n.apply(this,arguments)};return t.toString=function(){return n.toString()},t}(function(){var n=void 0===arguments[0]?null:arguments[0];return 0===arguments.length?async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeProperty,"value")}):async_mutate(this,function(t){return node_eval(t,scripts_nodeProperty,"value",n)})}),data:function(n){var t=void 0===arguments[1]?null:arguments[1];return 1===arguments.length?async_getValueOf(0,this,function(t){return node_eval(t,scripts_nodeDataset,n)}):async_mutate(this,function(e){return node_eval(e,scripts_nodeDataset,n,t)})},prop:function(n){var t=void 0===arguments[1]?null:arguments[1];return 1===arguments.length?async_getValueOf(0,this,function(t){return node_eval(t,scripts_nodeProperty,n)}):async_mutate(this,function(e){return node_eval(e,scripts_nodeProperty,n,t)})}})}(),function(){_.obj_extend(SQueryProto,{text:function(){var n=void 0===arguments[0]?null:arguments[0];return 0===arguments.length?async_aggr("",this,function(n,t){return node_eval(t,scripts_nodeProperty,"textContent").then(function(t){return n+t})}):async_each(this,function(t,e){return node_eval(e,scripts_nodeProperty,"textContent",n).done(function(){return t.add(e)})})},html:function(){var n=void 0===arguments[0]?null:arguments[0];return 0===arguments.length?async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeProperty,"innerHTML")}):async_each(this,function(t,e){return node_eval(e,scripts_nodeProperty,"textContent",n).done(function(){return t.add(e)})})}}),function(){var n={append:"beforeend",prepend:"afterbegin",before:"beforebegin",after:"afterend"};Object.keys(n).forEach(function(t){var e=n[t];SQueryProto[t]=function(n){return async_each(this,function(t,r){return node_eval(r,scripts_nodeFunctionCall,"insertAdjacentHTML",e,n).done(function(){return t.add(r)})})}})}()}(),function(){_.obj_extend(SQueryProto,{remove:function(){return async_each(this,function(n,t){return node_eval(t,scripts_nodeRemove).done(function(){return n.add(t)})})}})}(),function(){_.obj_extend(SQueryProto,{click:function(){return async_each(this,function(n,t){return t.click().then(function(){n.add(t)})})},trigger:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),r=1;t>r;r++)e[r-1]=arguments[r];return async_each(this,function(t,r){return node_eval.apply(void 0,[r,scripts_nodeTrigger,n].concat(e)).done(function(){return t.add(r)})})},select:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return async_mutate(this,function(n,e){return n.getTagName().then(function(e){var r="select"===e?scripts_nodeSelectOption:scripts_nodeSelectTextRange;return node_eval.apply(void 0,[n,r].concat(t))})})}}),["focus","blur"].forEach(function(n){SQueryProto[n]=function(){return async_each(this,function(t,e){return node_eval(e,scripts_nodeFunctionCall,n).done(function(){return t.add(e)})})}})}(),function(){function n(n){var t="_%%%%%%_";n=n.replace(/\{([\w_]+)\}/g,function(n,e){var r=(o[e]||e).toUpperCase();return r in _webdriver.Key==!1?n:t+r+t});var e=n.split(t);e.length;return e.map(function(n,t){return t%2===0?n:_webdriver.Key[n]})}function t(n){var t=n.split("+");return t.forEach(function(n,u){return""===n?void(t[u]="+"):r(n)?void(t[u]=e(n)):void 0}),0===t.length?t[0]:_webdriver.Key.chord.apply(_webdriver.Key,t)}function e(n){var t=(o[n]||n).toUpperCase();return _webdriver.Key[t]}function r(n){var t=(o[n]||n).toUpperCase();return t in _webdriver.Key}function u(n){return function(t){var e=n.map(function(n){return t.sendKeys(n)});return e[e.length-1]}}var o={ctrl:"control",backspace:"back_space",esc:"escape",left:"arrow_left",right:"arrow_right",up:"arrow_up",down:"arrow_down"};_.obj_extend(SQueryProto,{sendKeys:function(n){return async_each(this,function(t,e){return e.sendKeys(n).then(function(){t.add(e)})})},type:function(t){var e=n(t),r=u(e);return async_each(this,function(n,t){return r(t).then(function(){n.add(t)})})},press:function(n){var e=t(n);return async_each(this,function(n,t){return t.sendKeys(e).then(function(){n.add(t)})})}})}(),function(){_.obj_extend(SQueryProto,{css:function(n){var t=void 0===arguments[1]?null:arguments[1];return 1===arguments.length&&"string"==typeof n?async_getValueOf(0,this,function(t){return t.getCssValue(n)}):async_mutate(this,function(e){return node_eval(e,scripts_nodeCss,n,t)})},height:function(){var n=void 0===arguments[0]?null:arguments[0];return null==n?async_getValueOf(0,this,function(n){return n.getSize().then(function(n){return n.height})}):this.css("height",n)},innerHeight:function(n){return async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeProperty,"offsetHeight")})},width:function(){var n=void 0===arguments[0]?null:arguments[0];return null==n?async_getValueOf(0,this,function(n){return n.getSize().then(function(n){return n.width})}):this.css("width",n)},innerWidth:function(n){return async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeProperty,"offsetWidth")})},offset:function(){return async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeFunctionCall,"getBoundingClientRect").then(function(n){return{top:n.top,left:n.left}})})},position:function(){return async_getValueOf(0,this,function(n){return node_eval(n,scripts_nodeProperty,"offsetTop").then(function(t){return node_eval(n,scripts_nodeProperty,"offsetLeft").then(function(n){return{top:t,left:n}})})})},scrollTop:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return async_getValueOf(0,this,function(n){return node_eval.apply(void 0,[n,scripts_nodeProperty,"scrollTop"].concat(t))})},scrollLeft:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return async_getValueOf(0,this,function(n){return node_eval.apply(void 0,[n,scripts_nodeProperty,"scrollLeft"].concat(t))})}})}(),function(){function n(n){return function(t){return async_each(this,function(e,r){return node_eval(r,n,t).done(function(){return e.add(r)})})}}_.obj_extend(SQueryProto,{hasClass:function(n){return async_getValueOf(0,this,function(t){return node_eval(t,scripts_nodeClassHas,n)})},addClass:n(scripts_nodeClassAdd),removeClass:n(scripts_nodeClassRemove),toggleClass:n(scripts_nodeClassToggle)})}(),function(){_.obj_extend(SQueryProto,{eval:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),r=1;t>r;r++)e[r-1]=arguments[r];return async_getValueOf(0,this,function(t){return node_eval.apply(void 0,[t,n].concat(e))})}})}();var SQuery=_.class_create(_.class_Dfr,SQueryProto);SQuery.fn=SQuery.prototype,function(){SQuery.build=function(t){var t=_.obj_extend(Object.create(n),t),e=require("selenium-webdriver/"+t.name.toLowerCase()),r=new e.Options;t.setBinaryPath(r),t.setArguments(r),t.setLogging(r);var u=(new _webdriver.Builder).forBrowser(t.name.toLowerCase());return t.setOptions(u,r),t.applyOptions(u,r),u.build()},SQuery.load=function(n,e){"/"===n[0]&&(n="file://"+process.cwd()+n),null==t&&(t=SQuery.build(e));var r=new SQuery;return t.get(n).then(function(){r.add(t),r.resolve(r)},function(u){return 100!==u.code?void r.reject(u):(t=SQuery.build(e),void t.get(n).then(function(){r.add(t),r.resolve(r)},function(n){return r.reject(n)}))}),r};var n,t=null;!function(){n={name:"Chrome",args:["no-sandbox"],binaryPath:null,applyOptions:function(n,t){var e="set"+this.name+"Options";if("function"!=typeof n[e])throw Error("Default function not found, please override 'applyOptions(builder, options)' to set it yourself. Was looking for : "+e);n[e](t)},setOptions:function(n,t){},setArguments:function(n){n.addArguments(this.args)},setBinaryPath:function(n){var t="set"+this.name+"BinaryPath";if("function"!=typeof n[t])throw Error("Default function not found, please override 'setBinaryPath' to set it yourself. Was looking for: "+t);this.binaryPath&&n[t](this.binaryPath)},setLogging:function(n){n.setLoggingPrefs({})}},"undefined"!=typeof process.env.BROWSER_PATH&&(n.binaryPath=process.env.BROWSER_PATH)}()}(),SQuery.eval=function(n){return node_evalGlobal(n)},SQuery.setDriver=function(n){_webdriver=n},SQuery.getDriver=function(){return _webdriver},module.exports=SQuery;
//# sourceMappingURL=query.min.js.map